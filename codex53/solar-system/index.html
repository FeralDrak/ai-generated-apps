<!doctype html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Syst√®me Solaire Interactif</title>
  <style>
    :root {
      --bg: #060913;
      --card: rgba(16, 24, 40, 0.82);
      --card-border: rgba(148, 163, 184, 0.28);
      --text: #e2e8f0;
      --muted: #93a5c4;
      --accent: #38bdf8;
      --accent-2: #a78bfa;
      --success: #22c55e;
      --warning: #f59e0b;
      --danger: #ef4444;
      --sun: #facc15;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Inter, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(circle at 20% 20%, rgba(56, 189, 248, 0.1), transparent 24%),
        radial-gradient(circle at 80% 10%, rgba(167, 139, 250, 0.1), transparent 20%),
        radial-gradient(circle at 50% 80%, rgba(34, 197, 94, 0.06), transparent 22%),
        var(--bg);
      min-height: 100vh;
      display: grid;
      grid-template-columns: minmax(280px, 360px) 1fr minmax(260px, 340px);
      gap: 14px;
      padding: 14px;
    }

    .panel {
      background: var(--card);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      backdrop-filter: blur(6px);
      box-shadow: 0 8px 28px rgba(0, 0, 0, 0.3);
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-height: 0;
    }

    h1 {
      font-size: 1.2rem;
      line-height: 1.35;
      color: #f8fafc;
      letter-spacing: 0.2px;
    }

    .subtitle {
      font-size: 0.92rem;
      color: var(--muted);
      line-height: 1.45;
    }

    .controls {
      display: grid;
      gap: 10px;
      background: rgba(15, 23, 42, 0.55);
      border: 1px solid rgba(148, 163, 184, 0.22);
      border-radius: 12px;
      padding: 10px;
    }

    .controls-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    label {
      font-size: 0.86rem;
      color: #cbd5e1;
    }

    input[type="range"] {
      width: 100%;
      accent-color: var(--accent);
    }

    button {
      border: none;
      border-radius: 10px;
      padding: 8px 12px;
      font-weight: 600;
      color: #0f172a;
      background: linear-gradient(120deg, var(--accent), var(--accent-2));
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.2s ease, opacity 0.2s ease;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 5px 16px rgba(56, 189, 248, 0.35);
    }

    button:active {
      transform: translateY(0);
    }

    .ghost {
      background: rgba(148, 163, 184, 0.18);
      color: var(--text);
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: none;
    }

    .stage-wrap {
      position: relative;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.2);
      background:
        radial-gradient(circle at center, rgba(10, 18, 35, 0.9), rgba(4, 8, 16, 0.98)),
        #020712;
      overflow: hidden;
      min-height: 560px;
    }

    canvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    .hint {
      position: absolute;
      left: 12px;
      bottom: 12px;
      font-size: 0.82rem;
      color: #dbeafe;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.25);
      padding: 7px 10px;
      border-radius: 10px;
      pointer-events: none;
    }

    .facts-list {
      list-style: none;
      display: grid;
      gap: 8px;
      max-height: 30vh;
      overflow: auto;
      padding-right: 2px;
    }

    .facts-list li {
      background: rgba(15, 23, 42, 0.55);
      border: 1px solid rgba(148, 163, 184, 0.25);
      border-radius: 11px;
      padding: 8px 10px;
      color: #dbe7ff;
      font-size: 0.9rem;
      line-height: 1.35;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.6);
      padding: 5px 9px;
      font-size: 0.76rem;
      color: #dbeafe;
    }

    .planet-color {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      box-shadow: 0 0 10px currentColor;
    }

    .info-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 7px;
      font-size: 0.88rem;
      color: #d7e4ff;
    }

    .info-grid b {
      color: #f8fafc;
    }

    .quiz {
      margin-top: auto;
      background: rgba(15, 23, 42, 0.55);
      border: 1px solid rgba(148, 163, 184, 0.25);
      border-radius: 12px;
      padding: 10px;
      display: grid;
      gap: 8px;
    }

    .quiz-options {
      display: grid;
      gap: 6px;
    }

    .quiz-options button {
      text-align: left;
      background: rgba(56, 189, 248, 0.14);
      color: #e2e8f0;
      border: 1px solid rgba(56, 189, 248, 0.35);
      box-shadow: none;
    }

    .quiz-status {
      font-size: 0.86rem;
      color: #dbeafe;
      min-height: 1.2em;
    }

    .good { color: var(--success); }
    .bad { color: var(--danger); }

    @media (max-width: 1200px) {
      body {
        grid-template-columns: 1fr;
      }

      .stage-wrap {
        min-height: 62vh;
      }

      .facts-list {
        max-height: unset;
      }
    }
  </style>
</head>
<body>
  <section class="panel" aria-label="Panneau de commande">
    <h1>üöÄ Syst√®me solaire interactif</h1>
    <p class="subtitle">Explore les orbites en temps r√©el, clique sur un astre pour afficher ses caract√©ristiques et lance un mini quiz pour apprendre en t'amusant.</p>

    <div class="controls">
      <div class="controls-row">
        <label for="speedRange">Vitesse de simulation</label>
        <span id="speedValue" class="badge">x1.0</span>
      </div>
      <input id="speedRange" type="range" min="0.2" max="6" step="0.1" value="1" />

      <div class="controls-row">
        <button id="toggleBtn">‚è∏Ô∏è Pause</button>
        <button id="resetBtn" class="ghost">üîÑ R√©initialiser</button>
      </div>
      <div class="controls-row">
        <button id="quizBtn" class="ghost">üéØ Nouvelle question</button>
        <span class="badge" id="timeLabel">Jour simul√© : 0</span>
      </div>
    </div>

    <div>
      <h2 style="font-size:1rem; margin-bottom:8px;">Faits rapides</h2>
      <ul class="facts-list" id="factsList"></ul>
    </div>
  </section>

  <main class="stage-wrap panel" style="padding: 0; gap: 0;">
    <canvas id="solarCanvas" aria-label="Visualisation du syst√®me solaire"></canvas>
    <p class="hint">üí° Astuce : clique sur une plan√®te, puis observe comment sa vitesse orbitale change avec le curseur.</p>
  </main>

  <aside class="panel" aria-live="polite">
    <h2 style="font-size:1.05rem;">Astre s√©lectionn√©</h2>
    <div id="selectedBadge" class="badge"><span class="planet-color" style="color: var(--sun); background: var(--sun);"></span>Soleil</div>
    <p id="selectedDescription" class="subtitle">Le Soleil est notre √©toile : il concentre plus de 99% de la masse du syst√®me solaire.</p>

    <div class="info-grid" id="infoGrid">
      <div><b>Type :</b> √âtoile</div>
      <div><b>Diam√®tre :</b> 1 392 700 km</div>
      <div><b>Distance moyenne au Soleil :</b> 0 km</div>
      <div><b>P√©riode orbitale :</b> ‚Äî</div>
      <div><b>Temp√©rature moyenne :</b> ~5 500¬∞C (surface)</div>
    </div>

    <section class="quiz">
      <h3 style="font-size:1rem;">Mini quiz spatial üß†</h3>
      <p id="quizQuestion" class="subtitle">Appuie sur ¬´ Nouvelle question ¬ª pour commencer.</p>
      <div id="quizOptions" class="quiz-options"></div>
      <p id="quizStatus" class="quiz-status"></p>
    </section>
  </aside>

  <script>
    const canvas = document.getElementById('solarCanvas');
    const ctx = canvas.getContext('2d');

    const speedRange = document.getElementById('speedRange');
    const speedValue = document.getElementById('speedValue');
    const timeLabel = document.getElementById('timeLabel');
    const toggleBtn = document.getElementById('toggleBtn');
    const resetBtn = document.getElementById('resetBtn');
    const factsList = document.getElementById('factsList');

    const selectedBadge = document.getElementById('selectedBadge');
    const selectedDescription = document.getElementById('selectedDescription');
    const infoGrid = document.getElementById('infoGrid');

    const quizBtn = document.getElementById('quizBtn');
    const quizQuestion = document.getElementById('quizQuestion');
    const quizOptions = document.getElementById('quizOptions');
    const quizStatus = document.getElementById('quizStatus');

    const planetData = [
      {
        name: 'Mercure', color: '#a8a29e', radius: 4, orbit: 60, periodDays: 88,
        diameter: '4 879 km', distance: '57,9 M km', temp: '167¬∞C',
        type: 'Plan√®te tellurique', description: 'Mercure est la plan√®te la plus proche du Soleil et aussi la plus rapide.'
      },
      {
        name: 'V√©nus', color: '#fcd34d', radius: 6, orbit: 85, periodDays: 225,
        diameter: '12 104 km', distance: '108,2 M km', temp: '464¬∞C',
        type: 'Plan√®te tellurique', description: 'V√©nus poss√®de une atmosph√®re tr√®s dense qui cr√©e un puissant effet de serre.'
      },
      {
        name: 'Terre', color: '#60a5fa', radius: 7, orbit: 115, periodDays: 365,
        diameter: '12 742 km', distance: '149,6 M km', temp: '15¬∞C',
        type: 'Plan√®te tellurique', description: 'La Terre est la seule plan√®te connue √† abriter la vie.'
      },
      {
        name: 'Mars', color: '#fb7185', radius: 5.5, orbit: 145, periodDays: 687,
        diameter: '6 779 km', distance: '227,9 M km', temp: '-63¬∞C',
        type: 'Plan√®te tellurique', description: 'Mars est surnomm√©e la plan√®te rouge √† cause de ses oxydes de fer.'
      },
      {
        name: 'Jupiter', color: '#f59e0b', radius: 15, orbit: 190, periodDays: 4333,
        diameter: '139 820 km', distance: '778,5 M km', temp: '-110¬∞C',
        type: 'G√©ante gazeuse', description: 'Jupiter est la plus grande plan√®te du syst√®me solaire et poss√®de la Grande Tache Rouge.'
      },
      {
        name: 'Saturne', color: '#fde68a', radius: 13, orbit: 240, periodDays: 10759,
        diameter: '116 460 km', distance: '1,43 Md km', temp: '-140¬∞C',
        type: 'G√©ante gazeuse', description: 'Saturne est c√©l√®bre pour ses anneaux spectaculaires compos√©s de glace et de roche.'
      },
      {
        name: 'Uranus', color: '#67e8f9', radius: 10, orbit: 285, periodDays: 30687,
        diameter: '50 724 km', distance: '2,87 Md km', temp: '-195¬∞C',
        type: 'G√©ante glac√©e', description: 'Uranus tourne presque couch√©e sur son axe, ce qui lui donne des saisons extr√™mes.'
      },
      {
        name: 'Neptune', color: '#2563eb', radius: 10, orbit: 325, periodDays: 60190,
        diameter: '49 244 km', distance: '4,5 Md km', temp: '-200¬∞C',
        type: 'G√©ante glac√©e', description: 'Neptune est connue pour ses vents supersoniques parmi les plus rapides du syst√®me solaire.'
      }
    ];

    const facts = [
      'Le Soleil repr√©sente environ 99,86% de la masse totale du syst√®me solaire.',
      'Plus une plan√®te est proche du Soleil, plus sa vitesse orbitale est √©lev√©e.',
      'Une ann√©e sur Mercure dure seulement 88 jours terrestres.',
      'Jupiter pourrait contenir plus de 1 300 Terres en volume.',
      'Les anneaux de Saturne s\'√©tendent sur des centaines de milliers de kilom√®tres.',
      'Neptune met environ 165 ans terrestres pour faire une r√©volution compl√®te.'
    ];

    const quizBank = [
      {
        question: 'Quelle plan√®te poss√®de les anneaux les plus visibles ?',
        options: ['Mars', 'Saturne', 'Mercure', 'Neptune'],
        answer: 'Saturne'
      },
      {
        question: 'Quelle plan√®te est la plus proche du Soleil ?',
        options: ['V√©nus', 'Terre', 'Mercure', 'Mars'],
        answer: 'Mercure'
      },
      {
        question: 'Combien de temps dure une orbite terrestre autour du Soleil ?',
        options: ['24 heures', '30 jours', '365 jours', '10 ans'],
        answer: '365 jours'
      },
      {
        question: 'Quelle plan√®te est la plus grande du syst√®me solaire ?',
        options: ['Jupiter', 'Uranus', 'Neptune', 'V√©nus'],
        answer: 'Jupiter'
      }
    ];

    let simulationSpeed = Number(speedRange.value);
    let simulatedDays = 0;
    let isPaused = false;
    let lastTimestamp = 0;
    let selectedBody = null;

    const bodies = planetData.map((planet) => ({
      ...planet,
      angle: Math.random() * Math.PI * 2,
      x: 0,
      y: 0
    }));

    function formatDays(days) {
      return Math.floor(days).toLocaleString('fr-FR');
    }

    function setSelectedBody(body) {
      if (!body) {
        selectedBody = null;
        selectedBadge.innerHTML = '<span class="planet-color" style="color: var(--sun); background: var(--sun);"></span>Soleil';
        selectedDescription.textContent = 'Le Soleil est notre √©toile : il concentre plus de 99% de la masse du syst√®me solaire.';
        infoGrid.innerHTML = `
          <div><b>Type :</b> √âtoile</div>
          <div><b>Diam√®tre :</b> 1 392 700 km</div>
          <div><b>Distance moyenne au Soleil :</b> 0 km</div>
          <div><b>P√©riode orbitale :</b> ‚Äî</div>
          <div><b>Temp√©rature moyenne :</b> ~5 500¬∞C (surface)</div>
        `;
        return;
      }

      selectedBody = body;
      selectedBadge.innerHTML = `<span class="planet-color" style="color:${body.color}; background:${body.color};"></span>${body.name}`;
      selectedDescription.textContent = body.description;
      infoGrid.innerHTML = `
        <div><b>Type :</b> ${body.type}</div>
        <div><b>Diam√®tre :</b> ${body.diameter}</div>
        <div><b>Distance moyenne au Soleil :</b> ${body.distance}</div>
        <div><b>P√©riode orbitale :</b> ${body.periodDays.toLocaleString('fr-FR')} jours</div>
        <div><b>Temp√©rature moyenne :</b> ${body.temp}</div>
      `;
    }

    function populateFacts() {
      factsList.innerHTML = '';
      facts.forEach((fact) => {
        const li = document.createElement('li');
        li.textContent = fact;
        factsList.appendChild(li);
      });
    }

    function startQuizRound() {
      quizStatus.textContent = '';
      quizStatus.className = 'quiz-status';
      const round = quizBank[Math.floor(Math.random() * quizBank.length)];
      quizQuestion.textContent = round.question;
      quizOptions.innerHTML = '';

      round.options.forEach((option) => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = option;
        btn.addEventListener('click', () => {
          if (option === round.answer) {
            quizStatus.textContent = '‚úÖ Bonne r√©ponse !';
            quizStatus.classList.add('good');
          } else {
            quizStatus.textContent = `‚ùå Incorrect. La bonne r√©ponse est : ${round.answer}.`;
            quizStatus.classList.add('bad');
          }
        });
        quizOptions.appendChild(btn);
      });
    }

    function resizeCanvas() {
      const rect = canvas.getBoundingClientRect();
      const dpr = Math.max(window.devicePixelRatio || 1, 1);
      canvas.width = Math.floor(rect.width * dpr);
      canvas.height = Math.floor(rect.height * dpr);
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }

    function drawStarField(width, height) {
      const starCount = Math.floor((width * height) / 8000);
      for (let i = 0; i < starCount; i += 1) {
        const x = Math.random() * width;
        const y = Math.random() * height;
        const r = Math.random() * 1.8;
        const alpha = 0.35 + Math.random() * 0.65;
        ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
        ctx.beginPath();
        ctx.arc(x, y, r, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function drawScene(dt) {
      const width = canvas.clientWidth;
      const height = canvas.clientHeight;
      const cx = width / 2;
      const cy = height / 2;

      ctx.clearRect(0, 0, width, height);
      drawStarField(width, height);

      if (!isPaused) {
        simulatedDays += dt * simulationSpeed * 18;
      }
      timeLabel.textContent = `Jour simul√© : ${formatDays(simulatedDays)}`;

      ctx.save();
      ctx.translate(cx, cy);

      for (const planet of bodies) {
        ctx.strokeStyle = 'rgba(148, 163, 184, 0.26)';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.arc(0, 0, planet.orbit, 0, Math.PI * 2);
        ctx.stroke();

        if (!isPaused) {
          const baseAngularSpeed = (Math.PI * 2) / planet.periodDays;
          planet.angle += baseAngularSpeed * dt * simulationSpeed * 18;
        }

        planet.x = Math.cos(planet.angle) * planet.orbit;
        planet.y = Math.sin(planet.angle) * planet.orbit;
      }

      const sunGlow = ctx.createRadialGradient(0, 0, 0, 0, 0, 45);
      sunGlow.addColorStop(0, 'rgba(250, 204, 21, 1)');
      sunGlow.addColorStop(1, 'rgba(250, 204, 21, 0.03)');
      ctx.fillStyle = sunGlow;
      ctx.beginPath();
      ctx.arc(0, 0, 45, 0, Math.PI * 2);
      ctx.fill();

      ctx.fillStyle = '#fde047';
      ctx.beginPath();
      ctx.arc(0, 0, 15, 0, Math.PI * 2);
      ctx.fill();

      bodies.forEach((planet) => {
        ctx.fillStyle = planet.color;
        ctx.beginPath();
        ctx.arc(planet.x, planet.y, planet.radius, 0, Math.PI * 2);
        ctx.fill();

        if (planet.name === 'Saturne') {
          ctx.strokeStyle = 'rgba(253, 230, 138, 0.8)';
          ctx.lineWidth = 1.5;
          ctx.beginPath();
          ctx.ellipse(planet.x, planet.y, planet.radius + 6, planet.radius + 2, 0.3, 0, Math.PI * 2);
          ctx.stroke();
        }

        if (selectedBody && selectedBody.name === planet.name) {
          ctx.strokeStyle = 'rgba(248, 250, 252, 0.85)';
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.arc(planet.x, planet.y, planet.radius + 5, 0, Math.PI * 2);
          ctx.stroke();
        }
      });

      ctx.restore();
    }

    function loop(timestamp) {
      if (!lastTimestamp) {
        lastTimestamp = timestamp;
      }
      const dt = Math.min((timestamp - lastTimestamp) / 1000, 0.05);
      lastTimestamp = timestamp;
      drawScene(dt);
      requestAnimationFrame(loop);
    }

    function pickPlanet(clientX, clientY) {
      const rect = canvas.getBoundingClientRect();
      const x = clientX - rect.left;
      const y = clientY - rect.top;
      const cx = rect.width / 2;
      const cy = rect.height / 2;
      const localX = x - cx;
      const localY = y - cy;

      for (const planet of bodies) {
        const dx = localX - planet.x;
        const dy = localY - planet.y;
        if (Math.hypot(dx, dy) <= planet.radius + 5) {
          return planet;
        }
      }

      if (Math.hypot(localX, localY) <= 18) {
        return null;
      }

      return selectedBody;
    }

    speedRange.addEventListener('input', () => {
      simulationSpeed = Number(speedRange.value);
      speedValue.textContent = `x${simulationSpeed.toFixed(1)}`;
    });

    toggleBtn.addEventListener('click', () => {
      isPaused = !isPaused;
      toggleBtn.textContent = isPaused ? '‚ñ∂Ô∏è Reprendre' : '‚è∏Ô∏è Pause';
    });

    resetBtn.addEventListener('click', () => {
      simulatedDays = 0;
      bodies.forEach((planet) => {
        planet.angle = Math.random() * Math.PI * 2;
      });
      setSelectedBody(null);
    });

    canvas.addEventListener('click', (event) => {
      const picked = pickPlanet(event.clientX, event.clientY);
      setSelectedBody(picked);
    });

    quizBtn.addEventListener('click', startQuizRound);

    window.addEventListener('resize', resizeCanvas);

    populateFacts();
    setSelectedBody(null);
    startQuizRound();
    resizeCanvas();
    requestAnimationFrame(loop);
  </script>
</body>
</html>
